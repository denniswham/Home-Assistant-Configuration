cover:
  - platform: group
    name: 'Roller Shutters'
    entities:
      - cover.shelly_shsw_25_c4c964  
      - cover.shelly_shsw_25_c4c695

script:
  alexa_open_the_cover:
    alias: '[Alexa] Open the cover'
    sequence:
      - service: cover.open_cover
        data_template:
          entity_id: >-
            {# Use the name of each Echo to determine which room the command likely came from. #}
            {%- set room = states("sensor.last_alexa")|replace('media_player.','') -%}

            {%- if room == "master_bedroom" -%}
              cover.shelly_shsw_25_c4c964
            {%- elif room == "lucas_room" -%}
              cover.shelly_shsw_25_c4c695
            {%- endif -%}

  alexa_close_the_cover:
    alias: '[Alexa] Close the cover'
    sequence:
      - service: cover.close_cover
        data_template:
          entity_id: >-
            {# Use the name of each Echo to determine which room the command likely came from. #}
            {%- set room = states("sensor.last_alexa")|replace('media_player.','') -%}

            {%- if room == "master_bedroom" -%}
              cover.shelly_shsw_25_c4c964
            {%- elif room == "lucas_room" -%}
              cover.shelly_shsw_25_c4c695
            {%- endif -%}

  alexa_close_the_cover_with_ventilation:
    alias: '[Alexa] Close the cover with ventilation'
    sequence:
      - service: cover.set_cover_position
        data_template:
          entity_id: >-
            {# Use the name of each Echo to determine which room the command likely came from. #}
            {%- set room = states("sensor.last_alexa")|replace('media_player.','') -%}

            {%- if room == "master_bedroom" -%}
              cover.shelly_shsw_25_c4c964
            {%- elif room == "lucas_room" -%}
              cover.shelly_shsw_25_c4c695
            {%- endif -%}  
          position: 10

  alexa_open_the_cover_halfway:
    alias: '[Alexa] Open the cover halfway'
    sequence:
      - service: cover.set_cover_position
        data_template:
          entity_id: >-
            {# Use the name of each Echo to determine which room the command likely came from. #}
            {%- set room = states("sensor.last_alexa")|replace('media_player.','') -%}

            {%- if room == "master_bedroom" -%}
              cover.shelly_shsw_25_c4c964
            {%- elif room == "lucas_room" -%}
              cover.shelly_shsw_25_c4c695
            {%- endif -%}  
          position: 60